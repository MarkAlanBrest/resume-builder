<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Work & Military Experience</title>
  <link rel="stylesheet" href="style.css">

  <style>
    .page-title {
      text-align: center;
      color: #0b3c6d;
      margin-bottom: 30px;
      font-size: 28px;
    }
    .system {
      color: #0b3c6d;
      font-weight: 600;
      margin-top: 10px;
    }
    .entry-card {
      border: 1px solid #ccc;
      padding: 12px;
      margin-bottom: 12px;
      background: #f9f9f9;
    }
    input {
      width: 100%;
      margin-bottom: 10px;
      padding: 6px;
    }
  </style>
</head>
<body>

<div class="chat">

  <h1 class="page-title">NCST’s Resume Builder</h1>

  <p style="text-align:center; max-width:650px; margin:0 auto 20px;">
    Enter <strong>all work and military experience</strong> here.
  </p>

  <button onclick="showJobForm()">Add Work or Military Experience</button>

  <div id="jobForm" style="display:none;">

    <div class="system">Employer / Branch</div>
    <input id="employer">

    <div class="system">City</div>
    <input id="employerCity">

    <div class="system">State</div>
    <input id="employerState">

    <div class="system">Job Title / Military Role</div>
    <input id="title">

    <div class="system">Start date (MM/YYYY)</div>
    <input id="startDate">

    <div class="system">End date (MM/YYYY or Present)</div>
    <input id="endDate">

    <div class="system">Job Duties (3–5)</div>
    <input id="task1" placeholder="Duty 1 (required)">
    <input id="task2" placeholder="Duty 2 (required)">
    <input id="task3" placeholder="Duty 3 (required)">
    <input id="task4" placeholder="Duty 4 (optional)">
    <input id="task5" placeholder="Duty 5 (optional)">

    <button onclick="saveJob()">Save Entry</button>
    <button onclick="cancel()">Cancel</button>
  </div>

  <div id="jobList"></div>

  <br>
  <button onclick="goBack()">Back</button>
  <button onclick="goNext()">Next</button>

</div>

<script>
function getData() {
  return JSON.parse(localStorage.getItem("resumeData")) || {};
}
function setData(d) {
  localStorage.setItem("resumeData", JSON.stringify(d));
}

window.onload = function () {
  const d = getData();
  d.workExperience ||= [];
  setData(d);
  renderJobs();
};

function showJobForm() {
  jobForm.style.display = "block";
}

function cancel() {
  jobForm.style.display = "none";
}

function saveJob() {
  if (!task1.value || !task2.value || !task3.value) {
    alert("At least 3 duties are required.");
    return;
  }

  const job = {
    employer: employer.value.trim(),
    employerCity: employerCity.value.trim(),
    employerState: employerState.value.trim().toUpperCase().slice(0, 2),
    title: title.value.trim(),
    start: startDate.value.trim(),
    end: endDate.value.trim(),
    task1: task1.value.trim(),
    task2: task2.value.trim(),
    task3: task3.value.trim(),
    task4: task4.value.trim(),
    task5: task5.value.trim()
  };

  const d = getData();
  d.workExperience.push(job);
  setData(d);

  employer.value =
  employerCity.value =
  employerState.value =
  title.value =
  startDate.value =
  endDate.value =
  task1.value =
  task2.value =
  task3.value =
  task4.value =
  task5.value = "";

  jobForm.style.display = "none";
  renderJobs();
}

function renderJobs() {
  const d = getData();
  jobList.innerHTML = "";

  d.workExperience.forEach((j, i) => {
    jobList.innerHTML += `
      <div class="entry-card">
        <strong>${j.title}</strong> – ${j.employer}
        (${j.employerCity}, ${j.employerState})<br>
        ${j.start} – ${j.end}<br><br>
        ${j.task1 ? "• " + j.task1 + "<br>" : ""}
        ${j.task2 ? "• " + j.task2 + "<br>" : ""}
        ${j.task3 ? "• " + j.task3 + "<br>" : ""}
        ${j.task4 ? "• " + j.task4 + "<br>" : ""}
        ${j.task5 ? "• " + j.task5 + "<br>" : ""}
        <br>
        <button onclick="deleteJob(${i})">Delete</button>
      </div>
    `;
  });
}

function deleteJob(i) {
  const d = getData();
  d.workExperience.splice(i, 1);
  setData(d);
  renderJobs();
}

function goBack() {
  window.location.href = "objective.html";
}
function goNext() {
  window.location.href = "certifications.html";
}
</script>

</body>
</html>